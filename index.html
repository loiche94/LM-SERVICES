<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LM-SERVICES | Électricien à Roses</title>
  <meta name="description" content="LM-SERVICES - Électricien français professionnel à Roses, Espagne.">
  <meta name="theme-color" content="#0a2e5a">

  <style>
    /* ===== Variables ===== */
    :root{
      --primary: #0a2e5a;
      --primary-2: #08304f;
      --accent: #ffcc00;
      --muted: #6b7280;
      --text: #222;
      --card: #ffffff;
      --bg: #f6f9fb;
      --glass: rgba(255,255,255,0.6);
      --shadow: 0 6px 24px rgba(12,18,28,0.08);
      --transition: 250ms cubic-bezier(.2,.9,.3,1);
    }
    [data-theme="dark"]{
      --primary: #0b2b45;
      --primary-2: #062033;
      --accent: #ffd700;
      --muted: #cbd5e1;
      --text: #eef2f7;
      --card: #0f1720;
      --bg: #071021;
      --glass: rgba(8,12,16,0.6);
      --shadow: 0 8px 34px rgba(0,0,0,0.6);
    }

    /* ===== Global reset ===== */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      transition: background var(--transition), color var(--transition);
      line-height:1.5;
      /* RESTORED BACKGROUND: gradient + soft vignette layer */
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(10,46,90,0.06), transparent 12%),
        linear-gradient(180deg, rgba(10,46,90,0.06) 0%, rgba(0,0,0,0) 20%),
        var(--bg);
      background-attachment: fixed;
    }

    /* ensure in dark mode the gradient is adapted */
    [data-theme="dark"] body{
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(13,59,102,0.08), transparent 12%),
        linear-gradient(180deg, rgba(4,18,30,0.25) 0%, rgba(0,0,0,0) 20%),
        var(--bg);
    }

    /* ===== Layout ===== */
    header{
      display:flex;
      gap:12px;
      align-items:center;
      padding:14px 22px;
      background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.35));
      border-bottom:1px solid rgba(10,20,30,0.04);
      backdrop-filter: blur(6px);
      position:sticky; top:0; z-index:50;
    }
    [data-theme="dark"] header{
      background: linear-gradient(180deg, rgba(8,12,16,0.6), rgba(8,12,16,0.45));
      border-bottom-color: rgba(255,255,255,0.03);
    }

    .logo-container img{height:48px;display:block}
    .company-name{font-weight:700;color:var(--primary);font-size:1.05rem}
    .subline{font-size:0.85rem;color:var(--muted)}

    .container{max-width:1200px;margin:0 auto;padding:0 16px}

    /* HERO */
    .hero{
      padding:44px 16px;
      margin:18px auto;
      border-radius:12px;
      max-width:1200px;
      background:
        linear-gradient(180deg, rgba(255,255,255,0.8), rgba(255,255,255,0.6));
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    [data-theme="dark"] .hero{
      background: linear-gradient(180deg, rgba(6,10,14,0.55), rgba(6,10,14,0.35));
    }
    .hero h1{font-size:1.6rem;color:var(--primary);margin-bottom:8px}
    .hero p{color:var(--muted);margin-bottom:12px}

    .btn{display:inline-block;padding:10px 14px;border-radius:9px;background:var(--primary);color:#fff;text-decoration:none;margin-right:8px;box-shadow:0 6px 18px rgba(10,46,90,0.06)}
    .btn-secondary{background:var(--accent);color:#091827}

    /* ===== GALERIE ===== */
    .lm-gallery-section{padding:28px 16px;margin:20px auto;max-width:1200px}
    .lm-gallery-title{font-size:1.25rem;color:var(--primary);margin-bottom:10px}
    .lm-gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px}
    .lm-gallery img{width:100%;height:130px;object-fit:cover;border-radius:8px;border:1px solid rgba(0,0,0,0.06);cursor:zoom-in;transition:transform .18s ease}
    .lm-gallery img:hover{transform:scale(1.03)}

    /* Lightbox */
    .lm-lightbox{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(1,2,6,0.92);z-index:2200;padding:18px}
    .lm-lightbox.show{display:flex}
    .lm-lightbox img{max-width:96%;max-height:92%;border-radius:8px;box-shadow:0 18px 44px rgba(0,0,0,0.6)}
    .lm-lightbox .lm-close,.lm-lightbox .lm-prev,.lm-lightbox .lm-next{position:absolute;background:rgba(255,255,255,0.95);border:none;padding:8px 10px;border-radius:8px;cursor:pointer}
    .lm-lightbox .lm-close{top:20px;right:20px}
    .lm-lightbox .lm-prev{left:20px;top:50%;transform:translateY(-50%)}
    .lm-lightbox .lm-next{right:20px;top:50%;transform:translateY(-50%)}

    footer{padding:22px;text-align:center;color:var(--muted)}
    @media (max-width:480px){
      .lm-gallery img{height:100px}
      .hero{padding:26px 12px}
    }
  </style>
</head>

<body data-theme="light">
  <header>
    <div class="logo-container"><img src="Logo.jpg" alt="LM-SERVICES Logo"></div>
    <div style="flex:1">
      <div class="company-name">LM-SERVICES</div>
      <div class="subline">Électricien professionnel • Roses, Espagne</div>
    </div>
    <div>
      <a class="btn" href="#contact">Devis Gratuit</a>
      <a class="btn btn-secondary" href="https://wa.me/33689492263" target="_blank" rel="noopener">WhatsApp</a>
    </div>
  </header>

  <main>
    <section class="hero container">
      <h1>Électricien Professionnel à Roses, Espagne – Dépannage et Installations</h1>
      <p>25 ans d'expérience • Intervention rapide (20-30 km) • Devis gratuit</p>
    </section>

    <section id="galerie-photos" class="lm-gallery-section container" aria-labelledby="gallery-heading">
      <h2 id="gallery-heading" class="lm-gallery-title">Galerie Photos</h2>
      <div id="lmGallery" class="lm-gallery" aria-live="polite"></div>
    </section>

    <section class="container" id="services" style="padding:18px 0">
      <h3 style="color:var(--primary);margin-bottom:6px">Nos services</h3>
      <p style="color:var(--muted)">Dépannage, installations électriques, tableaux, domotique.</p>
    </section>

  </main>

  <footer>
    <div class="container"><p>© <span id="current-year">2025</span> LM-SERVICES. Tous droits réservés.</p></div>
  </footer>

  <!-- Firebase minimal SDK (analytics) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js";
    const firebaseConfig = {
      apiKey: "AIzaSyDcadQzphwj9DdODMOrOnlrpmxi96mgUlU",
      authDomain: "studio-9990503423-de28a.firebaseapp.com",
      projectId: "studio-9990503423-de28a",
      storageBucket: "studio-9990503423-de28a.firebasestorage.app",
      messagingSenderId: "728334508399",
      appId: "1:728334508399:web:5a501400969e26d211c89a",
      measurementId: "G-3019QJR66D"
    };
    const app = initializeApp(firebaseConfig);
    try { getAnalytics(app); } catch(e) { console.warn('Analytics non disponible localement:', e.message); }
  </script>

  <!-- Script principal (fonctions, thèmes, interactions) -->
  <script defer>
  document.addEventListener('DOMContentLoaded', function () {
    /* --- Fonctions du site (restaurées et conservées) --- */

    function initElectricalArcs() {
      // Si ton template originel contient un container #arcs, ce code ajoute un effet visuel.
      const arcsContainer = document.getElementById('arcs');
      if (!arcsContainer) return;
      arcsContainer.innerHTML = '';
      for (let i = 0; i < 24; i++) {
        const arc = document.createElement('div');
        arc.className = 'arc';
        arc.style.position = 'absolute';
        arc.style.top = Math.round(Math.random()*100) + '%';
        arc.style.left = Math.round(Math.random()*100) + '%';
        const s = Math.round(Math.random()*80)+40;
        arc.style.width = s + 'px';
        arc.style.height = s + 'px';
        arc.style.borderRadius = '50%';
        arc.style.opacity = (Math.random()*0.12 + 0.05).toFixed(2);
        arc.style.background = 'radial-gradient(circle at 30% 30%, rgba(10,46,90,0.08), rgba(10,46,90,0.02))';
        arcsContainer.appendChild(arc);
      }
    }

    function initTheme(){
      const stored = localStorage.getItem('site-theme') || 'light';
      document.documentElement.setAttribute('data-theme', stored);
      // expose a global toggle for dev
      window.toggleTheme = () => {
        const cur = document.documentElement.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
        document.documentElement.setAttribute('data-theme', cur);
        localStorage.setItem('site-theme', cur);
      };
    }

    function initLanguage(){
      const initial = localStorage.getItem('site-lang') || 'fr';
      function apply(lang){
        document.querySelectorAll('.text-fr').forEach(e=> e.style.display = lang==='fr'? '': 'none');
        document.querySelectorAll('.text-en').forEach(e=> e.style.display = lang==='en' ? '' : 'none');
        document.querySelectorAll('.text-es').forEach(e=> e.style.display = lang==='es' ? '' : 'none');
        localStorage.setItem('site-lang', lang);
      }
      apply(initial);
    }

    function initCookieBanner(){
      const consent = localStorage.getItem('cookiesAccepted');
      // Ton template peut contenir #cookieBanner ; ici on n'affiche rien si déjà consent.
      if (!consent) {
        // laisser la logique pour afficher si tu as un banner
      }
    }

    function initFAQ(){
      document.querySelectorAll('.faq-question').forEach(q => {
        q.addEventListener('click', () => {
          q.classList.toggle('open');
          const a = q.nextElementSibling;
          if(!a) return;
          if (a.style.maxHeight) { a.style.maxHeight = null; } else { a.style.maxHeight = a.scrollHeight + 'px'; }
        });
      });
    }

    function initRatingStars(){
      document.querySelectorAll('.rating-stars').forEach(stars=>{
        const val = parseInt(stars.dataset.value||'0',10);
        stars.innerHTML = '';
        for(let i=1;i<=5;i++){
          const s = document.createElement('span');
          s.className = 'star' + (i<=val? ' selected' : '');
          s.textContent = '★';
          stars.appendChild(s);
        }
      });
    }

    function initCurrentYear(){ const el = document.getElementById('current-year'); if(el) el.textContent = new Date().getFullYear(); }

    // Appels d'init principaux
    initElectricalArcs();
    initTheme();
    initLanguage();
    initCookieBanner();
    initFAQ();
    initRatingStars();
    initCurrentYear();
  });
  </script>

  <!-- Galerie script (inchangé : gère encodeURIComponent pour espaces) -->
  <script>
  (function(){
    'use strict';
    const PHOTOS_PATH = 'photos/';
    const images = [
      "20220205_113328.webp","20220205_182724.webp","20220205_182735.webp","20220206_120748.webp",
      "20220206_160658.webp","20220207_154454.webp","20220207_154504.webp","20220207_154529.webp",
      "20220209_120518.webp","20220616_151835.webp","20220616_151840.webp","20220616_151843.webp",
      "20220616_152012.webp","20220616_152051.webp","20220622_145125.webp","20220622_145134.webp",
      "20220622_145153.webp","20221107_103008.webp","20221107_103012.webp","20221107_103146.webp",
      "20230206_121032.webp","20230206_121039.webp","20230206_163945.webp","20230415_105203.webp",
      "20230415_143714.webp","20230415_144002.webp","20230415_144611.webp","20230817_140351.webp",
      "20230913_103548.webp","20230913_103612.webp","20231120_143313.webp","20231120_143327.webp",
      "20240301_161136.webp","20240403_143453.webp","20240522_165726.webp","20240522_165733.webp",
      "20240522_165749.webp","20240522_165753.webp","20240529_101359.webp","20240529_101509.webp",
      "20241204_141812.webp","20250226_101951.webp","20250424_104623.webp","20250424_104742.webp",
      "20250424_105704.webp","20250506_142400.webp","20250527_154338.webp","20250527_154443.webp",
      "20250527_154543.webp","20250530_101739.webp","20250530_105251.webp","20250730_145456.webp",
      "20250809_141143.webp","20251009_102816.webp","20251009_102821 - Copie.webp","20251009_102821.webp",
      "20251010_141409.webp","20251010_141417.webp","20251014_105428.webp","20251031_140510.webp"
    ];

    const galleryEl = document.getElementById('lmGallery');
    if(!galleryEl) return;
    galleryEl.innerHTML = '';
    // inject thumbnails
    images.forEach((fn,idx)=>{
      const img = document.createElement('img');
      img.loading = 'lazy';
      img.alt = fn;
      img.dataset.index = idx;
      img.src = PHOTOS_PATH + encodeURIComponent(fn);
      img.addEventListener('click', ()=> openLightbox(idx));
      galleryEl.appendChild(img);
    });

    // lightbox
    let lightbox = document.getElementById('lmLightbox');
    if(!lightbox){
      lightbox = document.createElement('div');
      lightbox.id = 'lmLightbox';
      lightbox.className = 'lm-lightbox';
      lightbox.setAttribute('role','dialog');
      lightbox.setAttribute('aria-modal','true');
      lightbox.setAttribute('aria-hidden','true');
      lightbox.innerHTML = '<button class="lm-close" aria-label="Fermer">✕</button><button class="lm-prev" aria-label="Précédent">◀</button><img id="lmLightboxImg" alt=""><button class="lm-next" aria-label="Suivant">▶</button>';
      document.body.appendChild(lightbox);
    }
    const lbImg = document.getElementById('lmLightboxImg');
    const lbClose = lightbox.querySelector('.lm-close');
    const lbPrev = lightbox.querySelector('.lm-prev');
    const lbNext = lightbox.querySelector('.lm-next');
    let currentIndex = -1;

    function openLightbox(i){
      currentIndex = i;
      lbImg.src = PHOTOS_PATH + encodeURIComponent(images[currentIndex]);
      lbImg.alt = images[currentIndex];
      lightbox.classList.add('show');
      lightbox.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
    }
    function closeLightbox(){ lightbox.classList.remove('show'); lightbox.setAttribute('aria-hidden','true'); lbImg.src=''; document.body.style.overflow=''; }
    function next(){ currentIndex = (currentIndex + 1) % images.length; lbImg.src = PHOTOS_PATH + encodeURIComponent(images[currentIndex]); }
    function prev(){ currentIndex = (currentIndex - 1 + images.length) % images.length; lbImg.src = PHOTOS_PATH + encodeURIComponent(images[currentIndex]); }

    lbClose.addEventListener('click', closeLightbox);
    lbNext.addEventListener('click', next);
    lbPrev.addEventListener('click', prev);
    lightbox.addEventListener('click',(e)=>{ if(e.target === lightbox) closeLightbox(); });
    document.addEventListener('keydown',(e)=>{ if(!lightbox.classList.contains('show')) return; if(e.key==='Escape') closeLightbox(); if(e.key==='ArrowRight') next(); if(e.key==='ArrowLeft') prev(); });

    // verification non bloquante pour debug (console)
    images.forEach(f=>{
      const test = new Image();
      test.onerror = ()=> console.warn('Image fail:', PHOTOS_PATH + f);
      test.src = PHOTOS_PATH + encodeURIComponent(f);
    });

  })();
  </script>

  <script>
    // petit fallback utilitaire: expose toggleTheme() pour débogage rapide en console
    // window.toggleTheme() => permute light/dark
  </script>

</body>
</html>
